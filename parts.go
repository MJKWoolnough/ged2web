package main

// File automatically generated with ./embed.sh

const (
	htmlStart = "<html lang=\"en\"><head><title>Ged2Web</title><meta charset=\"UTF-8\" /><script type=\"module\">"
	htmlEnd   = "</script><style type=\"text/css\">#indexes a:not(:first-child){padding-left:.5em}#indexes a:not(:last-child){border-right:1px solid #000;padding-right:.5em}.pagination .prev{padding-right:1em}.pagination .next{padding-left:1em}.results{list-style:none;margin:20px 0;padding:0;overflow:hidden;clear:left}.results>li{padding-bottom:10px;border-bottom:1px dashed #000;margin-bottom:10px;overflow:hidden}.results>li>div:first-child{float:left;width:200px}.results>li>div:last-child{overflow:hidden}.results>li>div:last-child>div{display:inline;margin-right:20px;overflow:hidden}#relationship{border-collapse:separate;border-spacing:5px 0;margin-left:auto;margin-right:auto}#relationship ul{list-style:none;margin:0;padding:0}#relationship td:first-child{background-color:rgba(0,255,0,0.5);text-align:right}#relationship td:last-child{background-color:rgba(255,0,0,0.5);text-align:left}#relationship tr:last-child td{background-color:rgba(255,255,0,0.5);text-align:center}#relationship td{vertical-align:bottom;padding:0 20px;width:50%}#ged2web_title{text-align:center}.person{position:absolute;width:150px;left:50px;border:1px solid #000;text-align:center;word-wrap:break-word}.highlight{border-color:#080}.sex_U{background-color:#aaa}.sex_M{background-color:#aaf}.sex_F{background-color:#faa}.spouseLine{position:absolute;border-top:5px solid #000;border-bottom:5px solid #000;height:5px;width:200px;left:50px;z-index:-1}.downLeft{position:absolute;margin-top:10px;height:100px;width:100px;border-right:5px solid #000;border-bottom:5px solid #000}.downRight{position:absolute;margin-top:10px;height:100px;width:100px;border-left:5px solid #000;border-bottom:5px solid #000}.chosen{border-color:#f00 !important}.dob,.dod{font-size:.5em}.collapse,.expand{width:7px;height:7px;border-width:0 1px 1px 0;border-color:#000;border-style:solid;float:left;background-color:#fff;cursor:pointer;cursor:hand}.collapse{background-color:#000}</style></head><body></body></html>"
	modStart  = "export const people = ["
	modMid    = "], families = ["
	modEnd    = "]"
	jsStart   = "class e{container=$();chosen;highlight;expanded;rows=[];constructor(e,t){this.chosen=e,this.highlight=new Set(t),this.expanded=new Set(t),this.draw()}draw(e=0,t=0){let o=this.chosen,i=0,l=0;for(;;){const e=P[o][5],[t,i]=E[e];if(this.expanded.has(t))o=t;else{if(!this.expanded.has(i)){if(e)new s(this,t,0,!0);else{const e=new s(this,0,0);e.spouses=[new n(this,e,[0,0,o],0)]}break}o=i}}const r=u();for(const t of this.rows){for(const o of t){const t=Z+i*te,c=ee+o.col*oe;e&&o.id===e&&(l=c),o instanceof s?(i>0&&p(r,$({class:\"downLeft\",style:{top:t-50+\"px\",left:`${c+se/2}px`,width:0,height:\"50px\"}})),o.spouses.length>0&&p(r,$({class:\"spouseLine\",style:{top:`${t}px`,left:`${c}px`,width:(o.spouses[o.spouses.length-1].col-o.col)*oe+\"px\"}}))):o instanceof n&&o.children.length>0&&(p(r,$(o.col<=o.children[0].col?{class:\"downRight\",style:{top:`${t}px`,left:c-ne/2+\"px\"}}:{class:\"downLeft\",style:{top:`${t}px`,left:c-se+ne/2+\"px\",width:se-ne+\"px\"}})),o.children.length>1&&p(r,$({class:\"downLeft\",style:{top:t+te-50+\"px\",left:`${ee+o.children[0].col*oe+se/2}px`,width:(o.children[o.children.length-1].col-o.children[0].col)*oe+\"px\",height:0}})));const a=o.id,[,,h,d,f,,...u]=P[o.id],g=o instanceof n;p(r,$({class:{person:!0,[ie[f]]:!0,highlight:this.highlight.has(a),chosen:this.chosen===o.id},style:{top:`${Z+i*te}px`,left:`${ee+o.col*oe}px`}},[o.id>0&&o.id!==this.chosen&&(o instanceof s&&u.length>0||g)?$({class:!this.expanded.has(o.id)||g?\"expand\":\"collapse\",onclick:this.expand.bind(this,o.id,g)}):[],$({class:\"name\"},D(o.id)),h?$({class:\"dob\"},h):[],d?$({class:\"dod\"},d):[]]))}i++}g(this.container,r),e&&window.scroll({left:l+t})}addPerson(e,t){const s=this.rows[e],n=s?.[s?.length-1];return s?(s.push(n.next=t),n.col+1):(this.rows.push([t]),0)}expand(e,t,s){t?this.chosen=e:this.expanded.has(e)?this.expanded.delete(e):this.expanded.add(e),this.rows=[],this.draw(e,window.scrollX-s.target.offsetParent.offsetLeft)}}class t{id;col;next;constructor(e,t,s){this.id=t,this.col=e.addPerson(s,this)}}class s extends t{spouses=[];constructor(e,t,s,o=!1){if(super(e,t,s),e.expanded.has(t)||e.chosen===t||o){const[,,,,,,...o]=P[t];if(o.length>0){for(const t of o)this.spouses.push(new n(e,this,E[t],s));this.col=this.spouses[0].col-1}}}shift(e){this.col+=e,this.next&&this.next.col<=this.col&&this.next.shift(this.col-this.next.col+1)}}class n extends t{children=[];constructor(e,t,n,o){super(e,n[0]===t.id?n[1]:n[0],o);const[,,...i]=n,l=o+1;if(i.length>0){for(const t of i)this.children.push(new s(e,t,l));for(let e=this.children.length-1;e>=0;e--){const t=this.children[e];t.col<this.col-1&&t.next&&(t.col=t.next.col-1)}this.col<this.children[0].col&&(this.col=this.children[0].col),this.shift(0)}}shift(e){if(this.col+=e,0!==this.children.length)for(;this.children[this.children.length-1].col<this.col-1;)this.children[0].shift(this.col-this.children[this.children.length-1].col-1);this.next&&this.next.col<=this.col&&this.next.shift(this.col-this.next.col+1)}}let o,i,l=0,r=\"\";const c=(e,t)=>{if(\"string\"==typeof t)e.appendChild(document.createTextNode(t));else if(Array.isArray(t))for(const s of t)c(e,s);else if(t instanceof Node)e.appendChild(t);else if(t instanceof NodeList||t instanceof HTMLCollection)for(const s of Array.from(t))e.appendChild(s)},a=e=>e instanceof Function||e instanceof Object&&e.handleEvent instanceof Function,h=e=>a(e)||e instanceof Array&&3===e.length&&a(e[0])&&e[1]instanceof Object&&\"boolean\"==typeof e[2],d=e=>e instanceof Object,f=e=>e instanceof CSSStyleDeclaration||e instanceof Object,p=(e,t,s)=>{if(\"string\"==typeof t||t instanceof Array||t instanceof NodeList||t instanceof HTMLCollection||t instanceof Node)s=t;else if(t instanceof NamedNodeMap&&e instanceof Element)for(const s of t)e.setAttributeNode(s.cloneNode());else if(e&&\"object\"==typeof t)for(const s in t){const n=t[s];if(h(n)){if(s.startsWith(\"on\")&&e instanceof EventTarget){const t=n instanceof Array;e[t&&n[2]?\"removeEventListener\":\"addEventListener\"](s.substr(2),t?n[0]:n,!!t&&n[1])}}else if(e instanceof HTMLElement||e instanceof SVGElement)if(\"boolean\"==typeof n)e.toggleAttribute(s,n);else if(void 0===n)e.removeAttribute(s);else if(n instanceof Array||n instanceof DOMTokenList){if(\"class\"===s&&n.length)for(let t of n){const s=t.slice(0,1),n=\"!\"!==s&&(\"~\"!==s||void 0);e.classList.toggle(n?t:t.slice(1),n)}}else if(\"class\"===s&&d(n))for(const t in n)e.classList.toggle(t,n[t]??void 0);else if(\"style\"===s&&f(n))for(const[t,s]of n instanceof CSSStyleDeclaration?Array.from(n,(e=>[e,n.getPropertyValue(e)])):Object.entries(n))void 0===s?e.style.removeProperty(t):e.style.setProperty(t,s.toString());else e.setAttribute(s,n.toString())}return e instanceof Node&&(\"string\"!=typeof s||e.firstChild?s&&c(e,s):e.textContent=s),e},u=e=>{const t=document.createDocumentFragment();return\"string\"==typeof e?t.textContent=e:void 0!==e&&c(t,e),t},g=(e,t,s)=>{if(\"string\"==typeof t)s=t=void(e.textContent=t);else if(\"string\"==typeof s)s=void(e.textContent=s);else if(e instanceof Element)e.replaceChildren();else for(;null!==e.lastChild;)e.lastChild.remove();return p(e,t,s)},[m,w,x,$,y,b,C,v,S,L,N,A,k,G,j,M]=\"a button datalist div h2 h3 input label li option span table tbody td tr ul\".split(\" \").map((e=>(t,s)=>p(document.createElementNS(\"http://www.w3.org/1999/xhtml\",e),t,s))),P=["
	jsMid     = "],E=["
	jsEnd     = "],T=[[\"Parent\",\"Father\",\"Mother\"],[\"Sibling\",\"Brother\",\"Sister\"],[\"Spouse\",\"Husband\",\"Wife\"],[\"Child\",\"Son\",\"Daughter\"],[\"Pibling\",\"Uncle\",\"Aunt\"],[\"Nibling\",\"Nephew\",\"Niece\"]],O=(e,t)=>{const s=[];for(;t>0;)s.push(t),t=e.get(t)[0];return s.reverse()},_={one:\"st\",two:\"nd\",few:\"rd\",other:\"th\"},I=[\"Once\",\"Twice\",\"Thrice\"],R=new Intl.PluralRules(\"en-GB\",{type:\"ordinal\"}),U=(e,t,s)=>{const n=e.length,o=t.length,i=n>0&&o>0&&P[e[n-1]][5]!=P[t[o-1]][5]?\"Half-\":\"\";switch(n){case 0:switch(o){case 0:return\"Clone\";case 1:return T[0][s];default:const e=o-2;return e>3?`${e} x Great-Grand-`:\"Great-\".repeat(e)+`Grand-${T[0][s]}`}case 1:switch(o){case 0:return T[3][P[e[0]][4]];case 1:return`${i}${T[1][P[e[0]][4]]}`;default:const t=o-2;return`${i}${t>3?`${t} x Great-Grand-`:\"Great-\".repeat(t)}${T[4][P[e[0]][4]]}`}break;default:const t=n-2;switch(o){case 0:return(t>3?`${t} x Great-Grand-`:\"Great-\".repeat(t)+\"Grand-\")+T[3][P[e[0]][4]];case 1:return`${i}${t>3?`${t} x Great-`:\"Great-\".repeat(t)}${T[5][P[e[0]][4]]}`;default:const s=Math.min(n,o)-1,l=Math.abs(n-o);return`${i}${s}${_[R.select(s)]} ${i}Cousin${l>0?`, ${I[l-1]||`${l} Times`} Removed`:\"\"}`}}},D=e=>`${P[e][0]??\"?\"} ${P[e][1]??\"?\"}`,F=Array.from({length:26},(()=>[])),H=(new Intl.Collator).compare,q=(e,t)=>{const[s=\"\",n=\"\"]=P[e],[o=\"\",i=\"\"]=P[t];return n!==i?H(n,i):s!==o?H(s,o):t-e},B=(e,t)=>0===e?[]:$([p(re(\"tree\",{id:e}),D(e)),\" (\"+T[t][P[e][4]]+\")\"]),V=(e,t,s,n,o)=>{0!==e.length&&e.push(\"…\");for(let i=s;i<=n;i++)i!==s&&e.push(\", \"),e.push(t===i?N(i+1+\"\"):p(re(\"list\",Object.assign({p:i},o)),{class:\"pagination_link\"},i+1+\"\"))},W=(e,t,s=0)=>{const n=Math.ceil(e.length/20)-1,o=[];if(0===n)return[];s>n&&(s=n);let i=0;for(let e=0;e<=n;e++)e<3||e>n-3||(3>s||e>=s-3)&&e<=s+3||s-3-1==3&&3==e||s+3+1==n-3&&e==n-3||(e!=i&&V(o,s,i,e-1,t),i=e+1);return i<n&&V(o,s,i,n,t),$({class:\"pagination\"},[\"Pages: \",p(0!==s?re(\"list\",Object.assign({p:s-1},t)):N(),{class:\"pagination_link prev\"},\"Previous\"),o,p(s!==n?re(\"list\",Object.assign({p:s+1},t)):N(),{class:\"pagination_link next\"},\"Next\")])},X=(e,t,s,n=0)=>{const o=Math.min(20*(n+1),t.length),i=M({class:\"results\"}),r=[];for(let e=20*n;e<o;e++){const s=t[e],[,,,,,n,...o]=P[s],[c,a,...h]=E[n],d=o.map((e=>E[e])),f=w({onclick:()=>{if(l===s){l=0;for(const e of r)g(e,\"+\")}else if(0===l){l=s;for(const e of r)g(e,\"=\");g(f,\"-\")}else le(\"fhcalc\",{from:l,to:s})}},0===l?\"+\":l===s?\"-\":\"=\");r.push(f),p(i,S([$([p(re(\"tree\",{id:s}),D(s)),f]),$([B(c,0),B(a,0),h.filter((e=>e!==s)).map((e=>B(e,1))),d.map((([e,t,...n])=>[B(e!==s?e:t,2),n.filter((e=>e!==s)).map((e=>B(e,3)))]))])]))}p(e,[W(t,s,n),i,W(t,s,n)])},z=new Map,J=()=>le(\"list\",{q:K.value}),K=C({type:\"text\",list:\"treeNames\",onkeypress:e=>\"Enter\"===e.key&&J()}),Q=x({id:\"treeNames\"}),Y=({l:e,q:t,d_p:s=0})=>{const n=$(),i=Math.max(0,\"string\"==typeof s?parseInt(s)||0:s);if(ce(\"List\"),\"string\"==typeof t){K.value=t,ce(\"Search\");const e=K.value.toUpperCase().split(\" \").sort(),s=e.join(\" \");let o=[];if(z.has(s))o=z.get(s);else{for(let t=0;t<P.length;t++){const s=`${P[t][0]||\"\"} ${P[t][1]||\"\"}`.toUpperCase();e.every((e=>s.includes(e)))&&o.push(t)}z.set(s,o)}X(n,o.sort(q),{q:t},i)}else if(\"string\"==typeof e){const t=e.toUpperCase().charCodeAt(0);t>=65&&t<=90&&(ce(`List - ${e}`),X(n,F[t-65],{l:e},i))}return[o||(o=$({id:\"ged2web_title\"},[y(\"Select a Name\"),$({id:\"indexes\"},F.map(((e,t)=>p(re(\"list\",{l:String.fromCharCode(t+65)}),String.fromCharCode(t+65))))),$({id:\"index_search\"},[Q,v({for:\"index_search\"},\"Search Terms: \"),K,w({onclick:J},\"Search\")])])),n]},Z=100,ee=50,te=150,se=150,ne=50,oe=se+ne,ie=[\"U\",\"M\",\"F\"].map((e=>`sex_${e}`)),le=(t,s,n=!1)=>{let o,l=\"list\";switch(t){case\"tree\":o=(({id:t,highlight:s})=>{const n=\"string\"==typeof t?parseInt(t):t;if(!(n<=0||void 0===P[n]))return ce(`Family Tree - ${D(n)}`),new e(n,(s||\"\").split(\".\").map((e=>parseInt(e))).filter((e=>e>0))).container})(s),l=t;break;case\"fhcalc\":o=(({from:e,to:t})=>{const s=\"string\"==typeof e?parseInt(e):e,n=\"string\"==typeof t?parseInt(t):t;if(s<=0||n<=0||!P[s]||!P[n])return;ce(\"Relationship Calculator\");const[o,i,l]=((e,t)=>{const s=new Map([[e,[0,0]],[t,[0,0]]]),n=[[e,1],[t,2]];for(;n.length>0;){const e=n.shift(),[t,o]=e,i=P[t][5];for(const l of E[i].slice(0,2))if(l){const i=s.get(l);if(i){if(i[1]!==o)return[l,O(s,1===o?t:i[0]),O(s,1===o?i[0]:t)]}else s.set(l,e),n.push([l,o])}}return[0,[],[]]})(s,n),r=D(s),c=D(n);return 0===o?y(`No direct relationship between ${r} and ${c}`):[$({id:\"ged2web_title\"},[y(`${r} is the ${U(i,l,P[o][4])} of ${c}`),w({onclick:()=>le(\"fhcalc\",{from:n,to:s})},\"Swap\")]),A({id:\"relationship\"},k([j([r,c].map((e=>G(b(`Route from ${e}`))))),j([i,l].map((e=>G(M(e.map((e=>S(`${D(e)}, who is the ${T[3][P[e][4]]} of…`)))))))),j(G({colspan:2},[$(D(o)),b(\"Common Ancestor\"),p(re(\"tree\",{id:o,highlight:i.concat(l).join(\".\")}),\"Show in Tree\")]))]))]})(s),l=t;break;case\"list\":o=Y(s)}n||history.pushState(null,\"\",de(t,s)),p(document.body,{class:{[r]:!1,[r=\"ged2web_\"+l]:!0}}),g(i,o||Y({}))},re=(e,t)=>m({href:de(e,t),onclick:s=>{s.preventDefault(),le(e,t)}}),ce=e=>document.title=`${pe} - ${e}`,ae=()=>window.location.pathname.split(\"/\").pop()?.split(\".\").shift(),he=[\"list\",\"fhcalc\",\"tree\"].includes(ae()),de=(e,t)=>(he?`${e}.html?`:`?module=${e}&`)+Object.entries(t).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join(\"&\"),fe=()=>{const e=Object.fromEntries(new URL(window.location+\"\").searchParams.entries());le(he?ae():e.module,e,!0)},pe=document.title;for(let e=0;e<P.length;e++){let t=(P[e][1]??\"\").charCodeAt(0);t>=97&&(t-=32),t>=65&&t<=90&&F[t-65].push(e)}for(const e of F){e.sort(q);for(const t of e){const[e,s]=P[t];e&&s&&p(Q,L({value:`${e} ${s}`}))}}p(window,{onpopstate:fe}),(\"complete\"==document.readyState?Promise.resolve():new Promise((e=>globalThis.addEventListener(\"load\",e,{once:!0})))).then((()=>{i=document.getElementById(\"ged2web\")||document.body,fe()}));"
)
